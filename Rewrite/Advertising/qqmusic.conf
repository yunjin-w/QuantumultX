#!name=QQMusic 去开屏广告
#!desc=去除 QQ 音乐开屏广告、广告配置接口等（保守规则）
#!author=ChatGPT
#!version=2025.01
#!type=QuantumultX

hostname = y.qq.com, u.y.qq.com, isure.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, c.y.qq.com, dl.stream.qqmusic.qq.com

########################################
# 1. 拦截开屏广告（强力但安全）
########################################

# 常见广告字段（精准匹配 splash/ad）
^https?:\/\/.*qq.*\/(splash|ad|advert|launch).*$ url reject-200


########################################
# 2. QQ音乐本身已知广告接口（按域名）
########################################

# 广告资源请求 host（不会影响播放）
^https?:\/\/(?:aqqmusic\.tc\.qq\.com|isure\.stream\.qqmusic\.qq\.com)\/.*$ url reject-200

# 一些广告统计上报（不会影响功能）
^https?:\/\/.+\.qq\.com\/fcgi-bin\/musicu.fcg\?.*ad.*$ url reject-200


########################################
# 3. y.qq.com 的广告配置（网页容器/开屏）
########################################

^https?:\/\/y\.qq\.com\/.*(ad|advert|splash).* url reject-200


########################################
# 4. 广告配置接口 → 替换为空 JSON
########################################

# adconfig
^https?:\/\/.*\/adconfig.*$ url script-response-body https://raw.githubusercontent.com/yunjin-w/QuantumultX/main/Rewrite/Advertising/empty_json.js
# adInfo
^https?:\/\/.*\/adInfo.*$ url script-response-body https://raw.githubusercontent.com/yunjin-w/QuantumultX/main/Rewrite/Advertising/empty_json.js
# adSwitch
^https?:\/\/.*\/adSwitch.*$ url script-response-body https://raw.githubusercontent.com/yunjin-w/QuantumultX/main/Rewrite/Advertising/empty_json.js

########################################
# 5. （可选）防御性拦截，不建议先开
#   你可以视效果启用
########################################

# ^https?:\/\/.*tc\.qq\.com\/.*ad.*$ url reject-200
# ^https?:\/\/c\.y\.qq\.com\/.*ad.*$ url reject-200

########################################
# END
########################################
