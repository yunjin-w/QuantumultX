#!name=QQMusic 去开屏广告
#!desc=移除 QQ 音乐开屏广告，使用空 JSON 返回（最稳定）
#!author=ChatGPT
#!version=2025.01
#!system=QuantumultX

# ================= MITM 域名（必须放在顶部） =================
hostname = u.y.qq.com, u6.y.qq.com, y.qq.com, c.y.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com

# ================= QQ 音乐 开屏广告（核心） =================

# 核心开屏广告接口（必命中）
# QQ 音乐真正的开屏广告接口都在 musicu.fcg 下
^https:\/\/u[0-9]*\.y\.qq\.com\/cgi-bin\/musicu\.fcg.*(?:get_ads|advert|splash) url script-response-body https://raw.githubusercontent.com/yunjin-w/QuantumultX/main/Rewrite/Advertising/empty_json.js
# ================= 补充广告接口（增强命中率） =================
# 补充规则：针对c.y.qq.com的开屏广告
^https:\/\/c\.y\.qq\.com\/.*(?:get_ads|advert|splash).* url script-response-body https://raw.githubusercontent.com/yunjin-w/QuantumultX/main/Rewrite/Advertising/empty_json.js
# 次要广告接口（命中率较高）
^https:\/\/c\.y\.qq\.com\/.*(ad|advert).* url script-response-body https://raw.githubusercontent.com/yunjin-w/QuantumultX/main/Rewrite/Advertising/empty_json.js

# isure 广告源（无关键内容，reject-200 安全）
^https:\/\/isure\.stream\.qqmusic\.qq\.com\/.*(ad|advert).* url reject-200


# ================= 防御性拦截（不影响功能） =================

# 部分统计上报（不会影响 QQ 音乐使用）
^https:\/\/u\.y\.qq\.com\/cgi-bin\/musicu\.fcg\?.*ad.* url reject-200

# 写死 ad 字段的 URL
^https:\/\/y\.qq\.com\/.*(ad|advert|splash).* url reject-200
